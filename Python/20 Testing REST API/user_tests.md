## Пользовательское тестирование

Примечание: во всех запросах, кроме `GET api/key`, должен быть ключ `auth_key`, полученный в первом шаге

### 1. Пользовательский сценарий добавления питомца
| Предусловие | Шаги для повторения | Ожидание |
|:--------|:-------|:------|
| В системе создан пользователь с адресом `test@user.ru` и паролем `P@ssw0rd` | 1. Выполнить запрос `GET /api/key` с корректными данными пользователя. Получаем ключ для пользователя | В ответе на запрос из шага 3 получаем список питомцев, в котором будет питомец, созданный в шаге 2. |
|  | 2. Выполнить запрос создания питомца — `POST /api/pets` с корректными данными. Получаем id созданного пользователем питомца. |  |
|  | 3. Выполнить запрос получения питомцев с параметром `filter=my_pets`. |  |

### 2. Пользовательский сценарий загрузки фото питомца
| Предусловие | Шаги для повторения | Ожидание |
|:--------|:-------|:------|
| В системе создан пользователь с адресом `test@user.ru` и паролем `P@ssw0rd` | 1. Выполнить запрос `GET /api/key` с корректными данными пользователя. Получаем ключ для пользователя. | В ответе на запрос `GET /api/pets` приходит созданный питомец с корректно загруженным файлом из шага 3 и данными питомца. |
| У пользователя создан как минимум один питомец без фотографии, который выводится в шаге | 2. Выполнить запрос создания питомца — `GET /api/pets` с параметром `filter=my_pets`. Получаем список питомцев пользователя. |  |
|  | 3. Выполнить загрузку фотографии — `POST /api/pets/set_photo/{pet_id}` с ID питомца из шага 2 и параметром `pet_photo` в теле запроса |  |

### 3. Сценарий создания питомца с фото
| Предусловие | Шаги для повторения | Ожидание |
|:--------|:-------|:------|
| В системе создан пользователь с адресом `test@user.ru` и паролем `P@ssw0rd` | 1. Выполнить запрос `GET /api/key` с корректными данными пользователя. Получаем ключ для пользователя | В ответе на запрос `GET /api/pets` с параметром `filter=my_pets` приходит список питомцев, в котором есть ID питомца из шага 2; данные этого питомца соответствуют переданным данным |
|  | 2. Выполнить запрос `POST /api/pets` с телом, содержащим текстовые поля `name`, `animal_type`, `age`, `pet_photo` с корректными данными. Кодировка запроса - `multipart/form-data; boundary=...`. |  |

### 4. Сценарий изменения питомца
| Предусловие | Шаги для повторения | Ожидание |
|:--------|:-------|:------|
| В системе создан пользователь с адресом `test@user.ru` и паролем `P@ssw0rd` | 1. Выполнить запрос `GET /api/key` с корректными данными пользователя. Получаем ключ для пользователя | В ответе на запрос `GET /api/pets` с параметром `filter=my_pets` приходит список питомцев, в котором есть ID питомцев из шага 3; данные этого питомца соответствуют новым из шага 3 |
|  | 2. Выполнить запрос `GET /api/pets` с параметром `filter=my_pets`. Получаем список питомцев |  |
|  | 3. Выполнить запрос `PUT /api/pets/{pet_id}` с ID питомца из шага 2 и телом с параметрами {`name`: new_name, `animal_type`: new_type, `age`: new_age}. Значения полей должны содержать текст, отличающийся от текущих значений питомца |  |

### 5. Сценарий изменения нескольких питомцев
| Предусловие | Шаги для повторения | Ожидание |
|:--------|:-------|:------|
| В системе создан пользователь с адресом `test@user.ru` и паролем `P@ssw0rd`<br>У пользователя создано как минимум 2 питомца | 1. Выполнить запрос `GET /api/key` с корректными данными пользователя. Получаем ключ для пользователя | В ответе на запрос `GET /api/pets` с параметром `filter=my_pets` приходит список питомцев, в котором есть ID питомцев из шагов 3-4; данные этих питомцев соответствуют новым данным из соответствующих шагов |
|  | 2. Выполнить запрос создания питомца — `GET /api/pets` с параметром `filter=my_pets`. Получаем список питомцев пользователя. |  |
|  | 3. Выполнить запрос `PUT /api/pets/{pet_id}` с ID первого питомца и корректными данными. Поля `name`, `animal_type`, `age` должны отличаться от текущих значений |  |
|  | 4. Выполнить запрос `PUT /api/pets/{pet_id}` с ID второго питомца и корректными данными. Поля `name`, `animal_type`, `age` должны отличаться от текущих значений |  |

### 6. Сценарий удаления питомца
| Предусловие | Шаги для повторения | Ожидание |
|:--------|:-------|:------|
| В системе создан пользователь с адресом `test@user.ru` и паролем `P@ssw0rd` | 1. Выполнить запрос `GET /api/key` с корректными данными пользователя. Получаем ключ для пользователя | В ответе на запрос `GET /api/pets` с параметром `filter=my_pets` приходит список питомцев, в котором нет питомца с ID, созданном в шаге 2 |
|  | 2. Выполнить запрос создания питомца — `POST /api/pets` с корректными данными. Получаем id созданного пользователем питомца. |  |
|  | 3. Выполнить запрос `DELETE /api/pets/{pet_id}` с данными созданного питомца |  |
